# 压制

## 主要工作

压制字幕和视频，在尽可能保留视频质量的情况下达到B站的投稿标准，避免二压。

!> 由于这项工作说简单也简单，说复杂也复杂；现阶段通常由剪辑man或轴man自行完成。

## 视频参数

### 录播参数

|  参数   | 720p录播  | 1080p录播 |
|  ----  | ----  | ---- |
| 分辨率  | 1280x720 | 1920x1080 |
| 视频编码  | h264 | h264 |
| 音频编码  | aac | aac |
| 帧率  | 30 | 30 |
| 码率  | 2500kbps | 2500kbps |

?> 阿轴的录播文件有以上两种类型，前期录播均为720p，近期已经变为1080p。

### 视频压制参数

    分辨率：1080p（1920x1080）
    视频编码：h264
    音频编码：aac
    音频采样率：48KHz
    帧率：30fps
    视频码率：6000kbps以下
    音频码率：320kbps以下

!> ~~为何选择这样的参数：只有`1080p30(码率6000kbps以下)`/`1080p60(码率6000kbps以下)`/`720p60(码率3000kbps以下)`的视频不会被二压；其余参数的视频全线二压~~，现在所有参数的视频都会进行二压了，详情请见[其它](#其它)。

### B站投稿要求

视频大小：

    网页端上传的文件大小上限为8G
    视频内容时长最大10小时

视频格式：

    网页端、桌面客户端推荐上传的格式为：mp4,flv
    其他允许上传的格式：mp4,flv,avi,wmv,mov,webm,mpeg4,ts,mpg,rm,rmvb,mkv,m4v

视频码率：

    视频码率建议20000kbps（H264/AVC编码）
    视频峰值码率建议不超过60000kbps
    音频码率最高320kbps（AAC编码）
    分辨率最大支持4096x4096 120fps
    关键帧平均至少10秒一个
    色彩空间yuv420
    SDR位深8bit
    HDR位深10bit
    智能识别输出HDR
    声道数≤2
    采样率=48000
    逐行扫描
    智能识别全景视频

?> 上述要求为2020.12.21所见，b站已支持4k 120fps视频。

### 其它

!> 继B站引入DASH技术后，又开放了4k 120fps视频的投稿，但官方并未公布4k规格视频的二压机制，在此认为先前公布的规格要求仍然不变。由于二创组的视频制作并未涉及4k，因此这方面的变化应该对现阶段的压制没有影响。

[关于引入DASH技术，提升用户播放体验的说明](https://www.bilibili.com/read/cv949156)

![引入DASH后视频规格](../assets/dash.png)